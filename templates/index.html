<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ìœ„ë“œ ì „ê²°ê·œì •</title>
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='logo.png') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}?v=1763785200">
</head>
<body>
  <!-- í—¤ë” -->
  <header>
    <div class="container" style="display: flex; justify-content: space-between; align-items: center;">
      <h1>
        <img src="{{ url_for('static', filename='logo.png') }}" alt="ìœ„ë“œì¸ì²œì—ë„ˆì§€ ë¡œê³ " class="header-logo">
        ìœ„ë“œì¸ì²œì—ë„ˆì§€ ì „ê²°ê·œì • <span class="header-divider">|</span> <span class="header-version">ë²„ì „ v2025.12.01</span>
      </h1>
      <a href="https://withie.sharepoint.com/:w:/s/msteams_e16927/IQDMYptqvHlRQ49D-SBEMBudAVs3hcUt_pVLGWrgzRflup8?e=zy4EH1"
         target="_blank"
         style="display: flex; align-items: center; gap: 6px; padding: 8px 16px; background: rgba(255,255,255,0.15); border-radius: 8px; color: white; text-decoration: none; font-size: 0.85rem; transition: background 0.2s;"
         onmouseover="this.style.background='rgba(255,255,255,0.25)'"
         onmouseout="this.style.background='rgba(255,255,255,0.15)'">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        ì›ë³¸ ë¬¸ì„œ
      </a>
    </div>
  </header>

  <div class="container">
    <!-- ê²€ìƒ‰ ì˜ì—­ -->
    <div class="search-section">
      <div class="search-box">
        <input
          type="text"
          id="searchInput"
          placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ê³  ì—”í„°ë¥¼ ëˆ„ë¥´ì„¸ìš”..."
          autocomplete="off"
        >
        <button id="clearButton" class="clear-btn" style="display: none;" title="ê²€ìƒ‰ì–´ ì§€ìš°ê¸°">Ã—</button>
        <button id="searchButton">ê²€ìƒ‰</button>
      </div>

      <div id="searchResults" style="margin-top: 15px; padding: 15px; background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border-radius: 12px; display: none; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
        <div style="font-size: 0.9rem; color: #0369a1; font-weight: 600; margin-bottom: 10px;">
          ğŸ” ê²€ìƒ‰ ê²°ê³¼: <span id="resultCount">0</span>ê°œ í•­ëª©
        </div>
        <div id="resultSummary" style="font-size: 0.85rem; color: #6b7280; margin-bottom: 15px;"></div>
        <div id="resultList" style="max-height: 400px; overflow-y: auto; background: white; border-radius: 8px; padding: 10px;"></div>
      </div>
    </div>

    <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
    <div class="tab-navigation">
      <button class="tab-btn" data-tab="tab-all">ì „ì²´</button>
      {% for section in sections %}
      <button class="tab-btn" data-tab="{{ section.tab_id }}">{{ section.display_name }}</button>
      {% endfor %}
      <button class="tab-btn" data-tab="tab-org">ì¡°ì§ë„</button>
      <button class="tab-btn" data-tab="tab-guide">ê²°ì¬ê°€ì´ë“œ</button>
    </div>

    <!-- íƒ­ ì»¨í…ì¸  ì˜ì—­ -->

    <!-- ì „ì²´ íƒ­ - ëª¨ë“  ê·œì • í‘œì‹œ (ì¹´ë“œ ê·¸ë¦¬ë“œ í˜•ì‹) -->
    <div id="tab-all" class="tab-content">
      <div class="card-grid">
      {% for section in sections %}
      <div class="chapter-card" data-chapter="{{ loop.index }}" data-title="{% if section.display_name == 'ì„œë¬¸' %}ì„œë¬¸{% else %}ì œ{{ loop.index - 1 }}ì¥ {{ section.display_name }}{% endif %}">
        <div class="card-number">{% if section.display_name == 'ì„œë¬¸' %}0{% else %}{{ loop.index - 1 }}{% endif %}</div>
        <div class="card-subtitle">{{ section.display_name }}</div>
        <span class="card-arrow">â€º</span>
      </div>
      {% endfor %}
      </div>

      <!-- í¼ì³ì§„ ì½˜í…ì¸  ì˜ì—­ -->
      <div id="expanded-content" class="expanded-content-area" style="display: none;">
        <div class="expanded-header">
          <h3 id="expanded-title"></h3>
          <button class="close-expanded-btn" onclick="closeExpandedContent()">âœ•</button>
        </div>
        <div id="expanded-body"></div>
      </div>

      <!-- ìˆ¨ê²¨ì§„ ì½˜í…ì¸  ë°ì´í„° -->
      {% for section in sections %}
      <div id="content-data-{{ loop.index }}" class="content-data" style="display: none;">
        <table class="approval-table">
          <tbody>
            {% for rule in section.data.rules %}
              {% if rule.is_section_title %}
              {# ì ˆ ì œëª© ë˜ëŠ” ì¡° ì œëª© í–‰ #}
              <tr class="{% if rule.is_sub_section %}sub-section-title-row{% else %}article-title-row{% endif %}" data-item="{{ rule.display_item }}" data-chapter="{{ loop.index }}" data-section="{{ section.display_name }}">
                <td colspan="2" class="{% if rule.is_sub_section %}sub-section-title-cell{% else %}article-title-cell{% endif %}">
                  <div class="{% if rule.is_sub_section %}sub-section-title-text{% else %}article-title-text{% endif %}">{{ rule.display_item }}</div>
                </td>
              </tr>
              {# ê³µí†µ ì£¼ì„ í–‰ (ì ˆ ì œëª© ë°”ë¡œ ë‹¤ìŒì— í‘œì‹œ) #}
              {% if section.data.common_annotations %}
                {% for common_ann in section.data.common_annotations %}
                  {# ì ˆ ì œëª©ê³¼ ê³µí†µ ì£¼ì„ í‚¤ì›Œë“œ ë§¤ì¹­ #}
                  {% set keyword_map = {'ê¸ˆìœµ': 'ìê¸ˆ', 'ì§€ì¶œ': 'ì§€ì¶œ', 'ê³µí†µ': ''} %}
                  {% set mapped_keyword = keyword_map.get(common_ann.keyword, common_ann.keyword) %}
                  {% if mapped_keyword in rule.item or common_ann.keyword == 'ê³µí†µ' %}
              <tr class="common-annotation-row">
                <td class="common-annotation-label">ê³µí†µ</td>
                <td class="common-annotation-text">
                  <div>{{ common_ann.text }}</div>
                </td>
              </tr>
                  {% endif %}
                {% endfor %}
              {% endif %}
              {% else %}
              {# ì¼ë°˜ í•­ëª© í–‰ #}
              <tr class="level-{{ rule.level }}" data-item="{{ rule.display_item }}" data-chapter="{{ loop.index }}" data-section="{{ section.display_name }}">
                <td class="item-name" style="width: 40%;">{{ rule.display_item }}</td>
                <td class="approver-list" style="width: 60%;">
                  {% if rule.approvers %}
                    <div class="approver-line">
                    {% for approver in rule.approvers %}
                      <span class="approver-badge-unified {{ approver.css_class }}"
                            data-role="{{ approver.role }}"
                            data-symbol="{{ approver.symbol_text if approver.symbol_text else '' }}"
                            data-condition="{{ approver.condition if approver.condition else '' }}"
                            onclick="showApprovalDetail(this)">
                        {% if approver.symbol_text %}
                        <span class="badge-action-type">{{ approver.symbol_text }}</span>
                        {% endif %}
                        <span class="badge-role">{{ approver.role }}</span>
                        {% if approver.condition %}
                        <span class="badge-condition">{{ approver.condition }}</span>
                        {% endif %}
                      </span>
                    {% endfor %}
                    </div>
                  {% endif %}
                  {% if rule.notes and rule.notes != '-' %}
                  <div class="item-notes">{{ rule.notes }}</div>
                  {% endif %}
                  {% if rule.annotation %}
                  <div class="item-annotation">
                    <svg class="annotation-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"/>
                      <circle cx="12" cy="12" r="3"/>
                    </svg>
                    <span class="annotation-text">{{ rule.annotation }}</span>
                  </div>
                  {% endif %}
                </td>
              </tr>
              {% endif %}
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% endfor %}
    </div>

    <!-- ê° ì¥ë³„ íƒ­ -->
    {% for section in sections %}
    <div id="{{ section.tab_id }}" class="tab-content">
      <h2>{% if section.display_name == 'ì„œë¬¸' %}ì„œë¬¸{% else %}ì œ{{ loop.index - 1 }}ì¥ {{ section.display_name }}{% endif %}</h2>

      <!-- ì ˆ ëª©ì°¨ ë„¤ë¹„ê²Œì´ì…˜ -->
      <div style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); padding: 20px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
        <div style="font-weight: 600; color: #0369a1; margin-bottom: 15px; font-size: 1rem;">ğŸ“‘ ëª©ì°¨</div>
        <div style="display: flex; flex-direction: column; gap: 15px;">
          {# ë¨¼ì € ì´ ì¥ì— ì ˆ ì œëª©ì´ ìˆëŠ”ì§€ í™•ì¸ #}
          {% set has_section_titles = namespace(value=False) %}
          {% for rule in section.data.rules %}
            {% if rule.is_section_title %}
              {% set has_section_titles.value = True %}
            {% endif %}
          {% endfor %}

          {% if has_section_titles.value %}
            {# ì ˆ ì œëª©ì´ ìˆëŠ” ê²½ìš°: ì ˆë³„ë¡œ ê·¸ë£¹í™”í•˜ì—¬ í‘œì‹œ #}
            {% set current_section = namespace(title='', items=[], section_index=0) %}
            {% for rule in section.data.rules %}
              {% if rule.is_section_title %}
                {# ì´ì „ ì ˆ ë‚´ìš© ì¶œë ¥ #}
                {% if current_section.title %}
                  <div style="background: white; border: 2px solid #bae6fd; border-radius: 8px; padding: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                    <a href="#item-{{ section.tab_id }}-{{ current_section.section_index }}" style="font-weight: 600; color: #0369a1; text-decoration: none; font-size: 0.9rem; display: block; margin-bottom: 8px;">{{ current_section.title }}</a>
                    {% if current_section.items %}
                      <div style="padding-left: 15px; display: flex; flex-direction: column; gap: 4px;">
                        {% for item_data in current_section.items %}
                          <a href="#item-{{ section.tab_id }}-{{ item_data.index }}" style="font-size: 0.8rem; color: #64748b; text-decoration: none; display: block; transition: color 0.2s;">â€¢ {{ item_data.text }}</a>
                        {% endfor %}
                      </div>
                    {% endif %}
                  </div>
                {% endif %}
                {# ìƒˆ ì ˆ ì‹œì‘ #}
                {% set current_section.title = rule.display_item %}
                {% set current_section.items = [] %}
                {% set current_section.section_index = loop.index %}
              {% elif current_section.title and rule.level in [2, 3] and not rule.is_section_title %}
                {# ì ˆì— ì†í•œ í•˜ìœ„ í•­ëª© ìˆ˜ì§‘ (ë ˆë²¨ 2, 3ë§Œ) #}
                {% set _ = current_section.items.append({'text': rule.display_item, 'index': loop.index}) %}
              {% endif %}
            {% endfor %}
            {# ë§ˆì§€ë§‰ ì ˆ ì¶œë ¥ #}
            {% if current_section.title %}
              <div style="background: white; border: 2px solid #bae6fd; border-radius: 8px; padding: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                <a href="#item-{{ section.tab_id }}-{{ current_section.section_index }}" style="font-weight: 600; color: #0369a1; text-decoration: none; font-size: 0.9rem; display: block; margin-bottom: 8px;">{{ current_section.title }}</a>
                {% if current_section.items %}
                  <div style="padding-left: 15px; display: flex; flex-direction: column; gap: 4px;">
                    {% for item_data in current_section.items %}
                      <a href="#item-{{ section.tab_id }}-{{ item_data.index }}" style="font-size: 0.8rem; color: #64748b; text-decoration: none; display: block; transition: color 0.2s;">â€¢ {{ item_data.text }}</a>
                    {% endfor %}
                  </div>
                {% endif %}
              </div>
            {% endif %}
          {% else %}
            {# ì ˆ ì œëª©ì´ ì—†ëŠ” ê²½ìš°: ë ˆë²¨ 1, 2 í•­ëª©ì„ ì§ì ‘ TOCë¡œ í‘œì‹œ #}
            <div style="background: white; border: 2px solid #bae6fd; border-radius: 8px; padding: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
              <div style="display: flex; flex-direction: column; gap: 6px;">
                {% for rule in section.data.rules %}
                  {% if not rule.is_section_title and rule.level in [1, 2] %}
                    <a href="#item-{{ section.tab_id }}-{{ loop.index }}"
                       style="font-size: {% if rule.level == 1 %}0.9rem{% else %}0.8rem{% endif %};
                              color: {% if rule.level == 1 %}#0369a1{% else %}#64748b{% endif %};
                              font-weight: {% if rule.level == 1 %}600{% else %}normal{% endif %};
                              text-decoration: none;
                              display: block;
                              padding-left: {% if rule.level == 2 %}15px{% else %}0px{% endif %};
                              transition: color 0.2s;">
                      {% if rule.level == 2 %}â€¢ {% endif %}{{ rule.display_item }}
                    </a>
                  {% endif %}
                {% endfor %}
              </div>
            </div>
          {% endif %}
        </div>
      </div>

      <table class="approval-table">
        <tbody>
          {% for rule in section.data.rules %}
            {% if rule.is_section_title %}
            {# ì ˆ ì œëª© ë˜ëŠ” ì¡° ì œëª© í–‰ #}
            <tr class="{% if rule.is_sub_section %}sub-section-title-row{% else %}article-title-row{% endif %}" data-item="{{ rule.display_item }}" data-chapter="{{ loop.index }}" data-section="{{ section.display_name }}" id="item-{{ section.tab_id }}-{{ loop.index }}">
              <td colspan="2" class="{% if rule.is_sub_section %}sub-section-title-cell{% else %}article-title-cell{% endif %}">
                <div class="{% if rule.is_sub_section %}sub-section-title-text{% else %}article-title-text{% endif %}">{{ rule.display_item }}</div>
              </td>
            </tr>
            {# ê³µí†µ ì£¼ì„ í–‰ (ì ˆ ì œëª© ë°”ë¡œ ë‹¤ìŒì— í‘œì‹œ) #}
            {% if section.data.common_annotations %}
              {% for common_ann in section.data.common_annotations %}
                {# ì ˆ ì œëª©ê³¼ ê³µí†µ ì£¼ì„ í‚¤ì›Œë“œ ë§¤ì¹­ #}
                {% set keyword_map = {'ê¸ˆìœµ': 'ìê¸ˆ', 'ì§€ì¶œ': 'ì§€ì¶œ', 'ê³µí†µ': ''} %}
                {% set mapped_keyword = keyword_map.get(common_ann.keyword, common_ann.keyword) %}
                {% if mapped_keyword in rule.display_item or common_ann.keyword == 'ê³µí†µ' %}
            <tr class="common-annotation-row">
              <td class="common-annotation-label">ê³µí†µ</td>
              <td class="common-annotation-text">
                <div>{{ common_ann.text }}</div>
              </td>
            </tr>
                {% endif %}
              {% endfor %}
            {% endif %}
            {% else %}
            {# ì¼ë°˜ í•­ëª© í–‰ #}
            <tr class="level-{{ rule.level }}" data-item="{{ rule.display_item }}" data-chapter="{{ loop.index }}" data-section="{{ section.display_name }}" id="item-{{ section.tab_id }}-{{ loop.index }}">
              <td class="item-name" style="width: 40%;">{{ rule.display_item }}</td>
              <td class="approver-list" style="width: 60%;">
                {% if rule.approvers %}
                  <div class="approver-line">
                  {% for approver in rule.approvers %}
                    <span class="approver-badge-unified {{ approver.css_class }}"
                          data-role="{{ approver.role }}"
                          data-symbol="{{ approver.symbol_text if approver.symbol_text else '' }}"
                          data-condition="{{ approver.condition if approver.condition else '' }}"
                          onclick="showApprovalDetail(this)">
                      {% if approver.symbol_text %}
                      <span class="badge-action-type">{{ approver.symbol_text }}</span>
                      {% endif %}
                      <span class="badge-role">{{ approver.role }}</span>
                      {% if approver.condition %}
                      <span class="badge-condition">{{ approver.condition }}</span>
                      {% endif %}
                    </span>
                  {% endfor %}
                  </div>
                {% endif %}
                {% if rule.notes and rule.notes != '-' %}
                <div class="item-notes">{{ rule.notes }}</div>
                {% endif %}
                {% if rule.annotation %}
                <div class="item-annotation">
                  <svg class="annotation-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"/>
                    <circle cx="12" cy="12" r="3"/>
                  </svg>
                  <span class="annotation-text">{{ rule.annotation }}</span>
                </div>
                {% endif %}
              </td>
            </tr>
            {% endif %}
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% endfor %}

    <!-- ì¡°ì§ë„ íƒ­ -->
    {% include 'org_chart_section.html' %}

    <!-- ê²°ì¬ë¼ì¸ ê°€ì´ë“œ íƒ­ -->
    <div id="tab-guide" class="tab-content">
      <h2>ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤ ê°€ì´ë“œ</h2>
      <p style="color: #6b7280; margin-bottom: 30px;">ë²„ì „ v2019.04.10 - ìœ„ì„ì „ê²°ê·œì • ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤</p>

      <div class="process-grid">
        <!-- íŒ€ì¥ ì „ê²° í”„ë¡œì„¸ìŠ¤ -->
        <div class="process-container">
        <h3 class="process-title">íŒ€ì¥ ì „ê²° í”„ë¡œì„¸ìŠ¤</h3>
        <div class="process-flow">
          <div class="process-step">
            <div class="step-number">1</div>
            <div class="step-box step-draft">
              <div class="step-position">ê¸°ì•ˆì</div>
              <div class="step-action">ê¸°ì•ˆ</div>
            </div>
          </div>
          <div class="process-arrow">â†’</div>
          <div class="process-step">
            <div class="step-number">2</div>
            <div class="step-box step-optional">
              <div class="step-position">ì¤‘ê°„ê´€ë¦¬ì</div>
              <div class="step-action">ê²°ì¬</div>
              <div class="step-note">(ì„ íƒ)</div>
            </div>
          </div>
          <div class="process-arrow">â†’</div>
          <div class="process-step">
            <div class="step-number">3</div>
            <div class="step-box step-agree">
              <div class="step-position">ìœ ê´€íŒ€ì¥</div>
              <div class="step-action">í•©ì˜</div>
              <div class="step-note">(í•„ìš”ì‹œ)</div>
            </div>
          </div>
          <div class="process-arrow">â†’</div>
          <div class="process-step">
            <div class="step-number">4</div>
            <div class="step-box step-final">
              <div class="step-position">íŒ€ì¥</div>
              <div class="step-action">ì „ê²°</div>
              <div class="step-badge">ìµœì¢…</div>
            </div>
          </div>
        </div>
      </div>

      <!-- ë³¸ë¶€ì¥ ì „ê²° í”„ë¡œì„¸ìŠ¤ -->
      <div class="process-container">
        <h3 class="process-title">ë³¸ë¶€ì¥ ì „ê²° í”„ë¡œì„¸ìŠ¤</h3>
        <div class="process-flow">
          <div class="process-step">
            <div class="step-number">1</div>
            <div class="step-box step-draft">
              <div class="step-position">ê¸°ì•ˆì</div>
              <div class="step-action">ê¸°ì•ˆ</div>
            </div>
          </div>
          <div class="process-arrow">â†’</div>
          <div class="process-step">
            <div class="step-number">2</div>
            <div class="step-box step-optional">
              <div class="step-position">ì¤‘ê°„ê´€ë¦¬ì</div>
              <div class="step-action">ê²°ì¬</div>
              <div class="step-note">(ì„ íƒ)</div>
            </div>
          </div>
          <div class="process-arrow">â†’</div>
          <div class="process-step">
            <div class="step-number">3</div>
            <div class="step-box step-approve">
              <div class="step-position">íŒ€ì¥</div>
              <div class="step-action">ê²°ì¬</div>
            </div>
          </div>
          <div class="process-arrow">â†’</div>
          <div class="process-step">
            <div class="step-number">4</div>
            <div class="step-box step-agree">
              <div class="step-position">ìœ ê´€íŒ€ì¥</div>
              <div class="step-action">í•©ì˜</div>
              <div class="step-note">(í•„ìš”ì‹œ)</div>
            </div>
          </div>
          <div class="process-arrow">â†’</div>
          <div class="process-step">
            <div class="step-number">5</div>
            <div class="step-box step-final">
              <div class="step-position">ë³¸ë¶€ì¥</div>
              <div class="step-action">ì „ê²°</div>
              <div class="step-badge">ìµœì¢…</div>
            </div>
          </div>
        </div>
      </div>

      <!-- ëŒ€í‘œì´ì‚¬ ì „ê²° í”„ë¡œì„¸ìŠ¤ -->
      <div class="process-container">
        <h3 class="process-title">ëŒ€í‘œì´ì‚¬ ì „ê²° í”„ë¡œì„¸ìŠ¤</h3>
        <div class="process-flow">
          <div class="process-step">
            <div class="step-number">1</div>
            <div class="step-box step-draft">
              <div class="step-position">ê¸°ì•ˆì</div>
              <div class="step-action">ê¸°ì•ˆ</div>
            </div>
          </div>
          <div class="process-arrow">â†’</div>
          <div class="process-step">
            <div class="step-number">2</div>
            <div class="step-box step-optional">
              <div class="step-position">ì¤‘ê°„ê´€ë¦¬ì</div>
              <div class="step-action">ê²°ì¬</div>
              <div class="step-note">(ì„ íƒ)</div>
            </div>
          </div>
          <div class="process-arrow">â†’</div>
          <div class="process-step">
            <div class="step-number">3</div>
            <div class="step-box step-approve">
              <div class="step-position">íŒ€ì¥</div>
              <div class="step-action">ê²°ì¬</div>
            </div>
          </div>
          <div class="process-arrow">â†’</div>
          <div class="process-step">
            <div class="step-number">4</div>
            <div class="step-box step-agree">
              <div class="step-position">ìœ ê´€íŒ€ì¥</div>
              <div class="step-action">í•©ì˜</div>
              <div class="step-note">(í•„ìš”ì‹œ)</div>
            </div>
          </div>
          <div class="process-arrow">â†’</div>
          <div class="process-step">
            <div class="step-number">5</div>
            <div class="step-box step-approve">
              <div class="step-position">ë³¸ë¶€ì¥</div>
              <div class="step-action">ê²°ì¬</div>
            </div>
          </div>
          <div class="process-arrow">â†’</div>
          <div class="process-step">
            <div class="step-number">6</div>
            <div class="step-box step-agree">
              <div class="step-position">ê²½ì˜ê¸°íšë³¸ë¶€ì¥</div>
              <div class="step-action">í•©ì˜</div>
              <div class="step-note">(ì¡°ê±´ë¶€)</div>
            </div>
          </div>
          <div class="process-arrow">â†’</div>
          <div class="process-step">
            <div class="step-number">7</div>
            <div class="step-box step-final">
              <div class="step-position">ëŒ€í‘œì´ì‚¬</div>
              <div class="step-action">ì „ê²°</div>
              <div class="step-badge">ìµœì¢…</div>
            </div>
          </div>
        </div>
      </div>
      </div>
    </div>

  </div>

  <!-- ë§¨ ìœ„ë¡œ ë²„íŠ¼ -->
  <button id="scrollToTop" class="scroll-to-top" title="ë§¨ ìœ„ë¡œ">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M18 15l-6-6-6 6"/>
    </svg>
  </button>

  <!-- ëª¨ë‹¬ -->
  <div id="approvalModal" class="modal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeModal()">&times;</span>
      <h3 id="modalTitle">ê²°ì¬ ìƒì„¸ ì •ë³´</h3>
      <div id="modalBody"></div>
    </div>
  </div>

  <!-- AI ì±—ë´‡ í”Œë¡œíŒ… ë²„íŠ¼ -->
  <button id="chatbotButton" class="chatbot-button" title="AI ì±—ë´‡ìœ¼ë¡œ ì „ê²°ê·œì • ë¬¼ì–´ë³´ê¸°">
    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
      <circle cx="9" cy="10" r="1" fill="currentColor"/>
      <circle cx="15" cy="10" r="1" fill="currentColor"/>
      <path d="M9 14c0 1.5 1.34 2 3 2s3-.5 3-2"/>
    </svg>
  </button>

  <!-- AI ì±—ë´‡ ì°½ -->
  <div id="chatbotWindow" class="chatbot-window" style="display: none;">
    <div class="chatbot-header">
      <div class="chatbot-title">
        <img src="{{ url_for('static', filename='miso-logo.png') }}" alt="Miso AI" class="chatbot-logo">
        <span>ì „ê²°ê·œì • AI ë„ìš°ë¯¸</span>
      </div>
      <button id="closeChatbot" class="chatbot-close" title="ë‹«ê¸°">&times;</button>
    </div>

    <div id="chatMessages" class="chat-messages">
      <div class="chat-message bot-message">
        <div class="message-content">
          <div class="message-text">
            <strong>ğŸ’¡ ë¬´ì—‡ì´ë“  ë¬¼ì–´ë³´ì„¸ìš”!</strong><br><br>
            ì•ˆë…•í•˜ì„¸ìš”! ìœ„ë“œì¸ì²œì—ë„ˆì§€ ì „ê²°ê·œì • ì•ˆë‚´ ì±—ë´‡ì…ë‹ˆë‹¤.<br>
            ê¶ê¸ˆí•˜ì‹  ê·œì •ì„ í¸í•˜ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.<br>
            íŒ€ëª…ê³¼ ì§ê¸‰ì„ í•¨ê»˜ ì…ë ¥í•˜ë©´ ë”ìš± ìì„¸í•œ ë‹µë³€ì„ ë°›ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
          </div>
        </div>
      </div>
    </div>

    <div class="chat-input-container">
      <input
        type="text"
        id="chatInput"
        class="chat-input"
        placeholder="ì „ê²°ê·œì •ì— ëŒ€í•´ ë¬¼ì–´ë³´ì„¸ìš”..."
        autocomplete="off"
      />
      <button id="sendMessage" class="chat-send-button" title="ì „ì†¡">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="22" y1="2" x2="11" y2="13"/>
          <polygon points="22 2 15 22 11 13 2 9 22 2"/>
        </svg>
      </button>
    </div>
  </div>

  <footer style="text-align: center; padding: 40px 20px; color: #6b7280; background: #f9fafb; margin-top: 50px;">
    <p>&copy; 2025 ìœ„ë“œì¸ì²œì—ë„ˆì§€. All Rights Reserved.</p>
    <p style="font-size: 0.85rem; margin-top: 10px;">ì „ê²°ê·œì • ë²„ì „ v2025.12.01 | ë™ì  ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ | ì ‘ì†ì‹œê°„: <span id="conversionDate"></span></p>
    <script>document.getElementById('conversionDate').textContent = new Date().toLocaleString('ko-KR');</script>
  </footer>

  <script src="{{ url_for('static', filename='script.js') }}?v=1763783400"></script>
</body>
</html>
